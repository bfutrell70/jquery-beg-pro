<!DOCTYPE html>
<html>

<head>
    <title>jQuery Whackamole!</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!-- 
        Section 14.6
        stopped at 6:34
    -->

    <style>
        .game {
            width: 1000px;
            margin: auto;
        }
        .hole {
            display: inline-block;
            margin: 10px;
            width: 20%;
            height: 250px;
            overflow: hidden;
            position: relative;
        }
        .dirt {
            background-image: url(images/whackamole-ground.png);
            background-size: cover;
            z-index: 10;
            position: absolute;
            height: 50px;
            bottom: 0px;
            left: 0px;
            width: 100%;
        }
        .mole {
            background-image: url(images/whackamole-mole.png);
            background-size: cover;
            z-index: 3;
            position: absolute;
            height: 250px;
            top: 250px;
            left: 0px;
            width: 100%;
            cursor:  crosshair;
        }
    </style>
</head>

<body>
    <h1>
        Section 14 - jQuery Whackamole Exercise!<br>
        Score:<span class="score">0</span>
    </h1>

    <div class="message"></div>

    <button id="start">Start Game!</button>

    <div class="game"></div>

    <script src="../node_modules/jquery/dist/jquery.js"></script>
    <script>
        var score = 0;
        var gameover = false;

        $(function() {
            $('#start').click(startGame);

            function startGame() {
                // make game board
                makeGameBoard();

                gameover = false;
                score = 0;
                $('.score').text(score);

                // start gameplay
                startMoles();

                // timer for gameplay
                // set for 5 seconds
                setTimeout(function() {
                    return gameend();
                }, 5000);
            }

            function gameend() {
                gameover = true;
                $('.message').html('GAME OVER');
            }

            function makeGameBoard() {
                var moles = 8;
                var html = '';

                for (var mole=0; mole < moles; mole++) {
                    html += '<div class="hole hole' + mole + '"><div class="mole"></div>';
                    html += '<div class="dirt"></div></div>';
                }

                $('.game').html(html);
            }

            function randomHole() {
                var hole = Math.floor(Math.random() * $('.hole').length);
                console.log(hole);
                return hole;
            }

            function startMoles() {
                var jumpUp = $('.hole' + randomHole() + '> .mole');
                jumpUp.show();
                jumpUp.animate({
                    top: '50px'
                }, 100);

                setTimeout(function() {
                    jumpUp.animate({
                        top: '250px'
                    }, 1000)
                    startMoles();
                }, 100)
            }
        })

        
    </script>
</body>

</html>